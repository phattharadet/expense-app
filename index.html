<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Expense Tracker</title>

<style>
body {
    font-family: system-ui;
    background: #f5f5f5;
    margin: 0;
}

.container {
    max-width: 500px;
    margin: auto;
    padding: 15px;
}

.card {
    background: white;
    padding: 15px;
    border-radius: 12px;
    margin-bottom: 15px;
}

h2 { text-align: center; }

input, select, button {
    width: 100%;
    padding: 12px;
    margin-top: 8px;
    border-radius: 8px;
    border: 1px solid #ddd;
    font-size: 16px;
}

button {
    background: black;
    color: white;
    border: none;
}

.summary {
    display: flex;
    justify-content: space-between;
    font-size: 14px;
}

ul {
    list-style: none;
    padding: 0;
}

li {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 0;
    border-bottom: 1px solid #eee;
}

.delete-btn {
    background: #eee;
    color: #333;
    border: none;
    padding: 4px 8px;
    font-size: 12px;
    border-radius: 6px;
    width: auto;
}

.clear-btn {
    background: #ff4d4d;
}

.income { color: green; }
.expense { color: red; }
</style>
</head>

<body>

<div class="container">

<h2>üí∞ Expense Tracker</h2>

<div class="card">

<select id="month"></select>

<div class="summary">
<div>‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö: <span id="income">0</span></div>
<div>‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢: <span id="expense">0</span></div>
</div>

<h3>‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠: <span id="balance">0</span></h3>

<button class="clear-btn" onclick="clearAll()">‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>

</div>

<div class="card">

<input type="text" id="title" placeholder="‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£">
<input type="number" id="amount" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô">

<select id="type">
<option value="income">‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö</option>
<option value="expense">‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</option>
</select>

<button onclick="addTransaction()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</button>

</div>

<div class="card">
<ul id="list"></ul>
</div>

</div>

<script>
let transactions = JSON.parse(localStorage.getItem("transactions")) || [];

const monthSelect = document.getElementById("month");

for (let m = 1; m <= 12; m++) {
    let option = document.createElement("option");
    option.value = m;
    option.text = "‡πÄ‡∏î‡∏∑‡∏≠‡∏ô " + m;
    monthSelect.appendChild(option);
}

monthSelect.value = new Date().getMonth() + 1;

function saveData() {
    localStorage.setItem("transactions", JSON.stringify(transactions));
}

function updateUI() {

    let selectedMonth = Number(monthSelect.value);
    let list = document.getElementById("list");
    list.innerHTML = "";

    let income = 0;
    let expense = 0;

    transactions
    .filter(t => t.month == selectedMonth)
    .forEach((t) => {

        if (t.type === "income") income += t.amount;
        else expense += t.amount;

        let li = document.createElement("li");
        li.innerHTML = `
        <span class="${t.type}">${t.title} - ${t.amount}</span>
        <button class="delete-btn" onclick="deleteItem(${t.id})">‡∏•‡∏ö</button>
        `;
        list.appendChild(li);
    });

    document.getElementById("income").innerText = income;
    document.getElementById("expense").innerText = expense;
    document.getElementById("balance").innerText = income - expense;

    saveData();
}

function addTransaction() {

    let title = document.getElementById("title").value;
    let amount = document.getElementById("amount").value;
    let type = document.getElementById("type").value;
    let month = monthSelect.value;

    if (title === "" || amount === "") return;

    transactions.push({
        id: Date.now(),
        title,
        amount: Number(amount),
        type,
        month
    });

    updateUI();

    document.getElementById("title").value = "";
    document.getElementById("amount").value = "";
}

function deleteItem(id) {
    transactions = transactions.filter(t => t.id !== id);
    updateUI();
}

function clearAll() {
    if (confirm("‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î?")) {
        transactions = [];
        updateUI();
    }
}

monthSelect.addEventListener("change", updateUI);

updateUI();
</script>

</body>
</html>
