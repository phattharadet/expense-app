<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>รายรับรายจ่าย</title>

<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

<style>
body{
    font-family: system-ui;
    background:#f5f7fa;
    margin:0;
}

.container{
    max-width:500px;
    margin:auto;
    padding:15px;
}

.card{
    background:white;
    padding:18px;
    border-radius:16px;
    box-shadow:0 4px 12px rgba(0,0,0,0.05);
    margin-bottom:15px;
}

.logo{
    text-align:center;
    margin-bottom:10px;
}

.logo span{
    font-size:48px;
    color:#4CAF50;
    background:#E8F5E9;
    padding:12px;
    border-radius:50%;
}

h2{
    text-align:center;
    margin:5px 0 15px;
}

input,select{
    width:100%;
    padding:12px;
    margin-bottom:10px;
    border-radius:10px;
    border:1px solid #ddd;
    font-size:16px;
}

.btn-row{
    display:flex;
    gap:10px;
}

button{
    flex:1;
    padding:12px;
    border:none;
    border-radius:12px;
    font-size:16px;
    color:white;
}

.add{background:#4CAF50;}
.clear{background:#ff3b30;}

.item{
    display:flex;
    justify-content:space-between;
    margin-top:8px;
    background:#fafafa;
    padding:10px;
    border-radius:10px;
    font-size:14px;
}

.summary{
    text-align:right;
    margin-top:10px;
    font-weight:bold;
}
</style>
</head>

<body>

<div class="container">

<div class="card">

<div class="logo">
<span class="material-icons">account_balance_wallet</span>
</div>

<h2>บันทึกรายรับรายจ่าย</h2>

<select id="month"></select>

<input type="text" id="detail" placeholder="รายละเอียด">
<input type="number" id="amount" placeholder="จำนวนเงิน">

<select id="type">
<option value="income">รายรับ</option>
<option value="expense">รายจ่าย</option>
</select>

<div class="btn-row">
<button class="add" onclick="addItem()">เพิ่มรายการ</button>
<button class="clear" onclick="clearAll()">เคลียร์</button>
</div>

</div>

<div class="card">
<div id="list"></div>
<div class="summary" id="summary"></div>
</div>

</div>

<script>
const thaiMonths = [
"มกราคม","กุมภาพันธ์","มีนาคม","เมษายน",
"พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม",
"กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"
];

const monthSelect = document.getElementById("month");

thaiMonths.forEach((m,i)=>{
    monthSelect.innerHTML += `<option value="${i}">${m} ${new Date().getFullYear()+543}</option>`;
});

let data = JSON.parse(localStorage.getItem("data")) || [];

function save(){
    localStorage.setItem("data",JSON.stringify(data));
}

function addItem(){
    const detail = document.getElementById("detail").value;
    const amount = document.getElementById("amount").value;
    const type = document.getElementById("type").value;
    const month = document.getElementById("month").value;

    if(!detail || !amount) return;

    data.push({detail,amount,type,month});
    save();
    show();
}

function show(){
    const list = document.getElementById("list");
    const month = document.getElementById("month").value;

    list.innerHTML="";

    let income=0,expense=0;

    data.filter(d=>d.month==month).forEach((d,i)=>{

        if(d.type=="income") income+=parseInt(d.amount);
        else expense+=parseInt(d.amount);

        list.innerHTML+=`
        <div class="item">
            <span>${d.detail}</span>
            <span>${d.amount}</span>
        </div>`;
    });

    document.getElementById("summary").innerHTML=
    `คงเหลือ: ${income-expense} บาท`;
}

function clearAll(){
    if(confirm("ลบทั้งหมด?")){
        data=[];
        save();
        show();
    }
}

monthSelect.addEventListener("change",show);

show();
</script>

</body>
</html>
